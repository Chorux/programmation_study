<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planilha de Estudos de Programa√ß√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .custom-checkbox:checked {
            background-color: #4F46E5;
            border-color: #4F46E5;
        }
        .custom-checkbox:checked + span {
            text-decoration: line-through;
            color: #6B7280;
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        .notes-container {
            transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out;
            max-height: 0;
            overflow: hidden;
            padding-top: 0;
            padding-bottom: 0;
        }
        .notes-container.open {
            max-height: 200px;
            padding-top: 1rem;
        }
        #ai-assistant {
            transition: transform 0.3s ease-in-out;
        }
        .message-ai .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #4f46e5;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .message-content pre {
            background-color: #1E293B;
            color: #E2E8F0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-size: 0.875rem;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .message-content code {
            font-family: 'Courier New', Courier, monospace;
        }
        .message-content p {
            margin-bottom: 0.5rem;
        }
        .message-content h1, .message-content h2, .message-content h3 {
            font-weight: 600;
            margin-bottom: 0.5rem;
            margin-top: 1rem;
        }
        .message-content ul, .message-content ol {
            margin-left: 1.5rem;
            margin-bottom: 0.5rem;
            list-style: revert;
        }
        .tab-button {
            transition: all 0.2s ease-in-out;
        }
        .tab-button.active {
            background-color: #4F46E5;
            color: white;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="relative min-h-screen flex flex-col">
        <!-- Main Content -->
        <main class="container mx-auto p-4 sm:p-6 lg:p-8 flex-grow">
            <header class="text-center mb-8 relative">
                <h1 id="main-title" class="text-4xl font-bold text-slate-900"></h1>
                <p id="main-subtitle" class="text-slate-600 mt-2"></p>
                <button id="lang-switcher" class="absolute top-0 right-0 bg-slate-200 text-slate-700 px-3 py-1 rounded-md text-sm font-medium hover:bg-slate-300 transition">
                    EN / PT
                </button>
            </header>

            <!-- Se√ß√£o de Progresso Geral -->
            <div class="mb-10 bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <h2 id="progress-title" class="text-2xl font-semibold mb-4 text-slate-800"></h2>
                <div class="w-full bg-slate-200 rounded-full h-6">
                    <div id="progressBar" class="bg-indigo-600 h-6 rounded-full text-center text-white text-sm font-medium leading-6 progress-bar-fill" style="width: 0%;">
                        0%
                    </div>
                </div>
            </div>
            
            <!-- Abas de Conte√∫do -->
            <div class="mb-8">
                <div id="tab-selector" class="flex flex-wrap justify-center border-b border-slate-200">
                    <!-- Abas ser√£o inseridas aqui -->
                </div>
            </div>

            <!-- Conte√∫do dos M√≥dulos -->
            <div id="modulesContainer" class="space-y-6">
                <!-- Os m√≥dulos ser√£o inseridos aqui -->
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="w-full text-center p-6 text-slate-500 text-sm">
            <p id="footer-text"></p>
        </footer>

        <!-- AI Assistant Panel -->
        <div id="ai-assistant" class="fixed top-0 right-0 h-full w-full sm:w-96 bg-white shadow-lg transform translate-x-full z-50 flex flex-col">
            <div class="p-4 border-b flex justify-between items-center bg-slate-50">
                <h2 id="ai-assistant-title" class="text-xl font-semibold text-slate-800"></h2>
                <div class="flex items-center gap-2">
                    <button id="settings-btn" class="p-2 rounded-full hover:bg-slate-200 text-xl leading-none" title="Configura√ß√µes">‚öôÔ∏è</button>
                    <button id="close-ai" class="p-2 rounded-full hover:bg-slate-200 text-2xl leading-none" title="Fechar">&times;</button>
                </div>
            </div>
            <div id="chat-messages" class="flex-grow p-4 overflow-y-auto space-y-4 flex flex-col"></div>
            <div class="p-4 border-t bg-slate-50">
                <div class="flex gap-2">
                    <input id="chat-input" type="text" class="w-full p-2 border border-slate-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                    <button id="send-btn" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition"></button>
                </div>
            </div>
        </div>

        <!-- API Key Modal -->
        <div id="api-key-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-[100]">
            <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md mx-4">
                <h3 id="modal-title" class="text-lg font-bold mb-4"></h3>
                <p id="modal-desc" class="text-sm text-slate-600 mb-4"></p>
                <ol id="modal-steps" class="text-sm text-slate-600 mb-4 list-decimal list-inside space-y-1"></ol>
                <input id="api-key-input" type="password" class="w-full p-2 border border-slate-300 rounded-md mb-4">
                <div class="flex justify-end gap-2">
                    <button id="cancel-api-key" class="px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300"></button>
                    <button id="save-api-key" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"></button>
                </div>
            </div>
        </div>

        <!-- Floating Toggle Button -->
        <button id="toggle-ai" class="fixed bottom-8 right-8 bg-indigo-600 text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center text-3xl z-40 hover:bg-indigo-700 transition">ü§ñ</button>
    </div>

    <script>
        const contentData = {
            general: {
                pt: [
                    { module: "M√≥dulo 1: Fundamentos Essenciais", topics: [{ name: "L√≥gica de Programa√ß√£o e Algoritmos", link: "https://www.cursoemvideo.com/course/curso-de-algoritmos/" }, { name: "Tipos de Dados e Vari√°veis", link: "https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Guide/Grammar_and_types" }, { name: "Operadores", link: "https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Guide/Expressions_and_Operators" }, { name: "Estruturas Condicionais", link: "https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Guide/Control_flow_and_error_handling" }, { name: "Estruturas de Repeti√ß√£o", link: "https://www.w3schools.com/js/js_loop_for.asp" }] },
                    { module: "M√≥dulo 2: Linguagem de Programa√ß√£o (Base)", topics: ["Sintaxe e Ambiente", "Fun√ß√µes e Escopo", "Estruturas de Dados Nativas", "Manipula√ß√£o de Strings e N√∫meros", "Tratamento de Erros"] },
                    { module: "M√≥dulo 3: Estruturas de Dados", topics: ["Arrays e Matrizes", "Pilhas e Filas", "Listas Encadeadas", "√Årvores", "Grafos", "Tabelas Hash"] },
                    { module: "M√≥dulo 4: Algoritmos Avan√ßados", topics: ["An√°lise de Complexidade (Big O)", "Busca e Ordena√ß√£o", "Recursividade", "Programa√ß√£o Din√¢mica"] },
                    { module: "M√≥dulo 5: Paradigmas de Programa√ß√£o", topics: ["Programa√ß√£o Orientada a Objetos", "Programa√ß√£o Funcional", "Padr√µes de Projeto (Design Patterns)"] },
                    { module: "M√≥dulo 6: Banco de Dados", topics: ["Banco de Dados Relacionais (SQL)", "Banco de Dados NoSQL", "Modelagem de Dados", "ORM (Mapeamento Objeto-Relacional)"] },
                    { module: "M√≥dulo 7: Ferramentas e Boas Pr√°ticas", topics: ["Controle de Vers√£o (Git e GitHub)", "Linha de Comando", "Testes de Software", "Princ√≠pios de Design (SOLID, DRY)", "APIs REST"] },
                    { module: "M√≥dulo 8: T√≥picos Avan√ßados", topics: ["Concorr√™ncia e Paralelismo", "Arquitetura de Software", "Seguran√ßa", "Cloud Computing", "Containers (Docker)"] },
                ],
                en: [
                    { module: "Module 1: Essential Fundamentals", topics: [{ name: "Programming Logic and Algorithms", link: "https://www.geeksforgeeks.org/introduction-to-algorithms/" }, { name: "Data Types and Variables", link: "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types" }, { name: "Operators", link: "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators" }, { name: "Conditional Statements", link: "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Control_flow_and_error_handling" }, { name: "Looping Structures", link: "https://www.w3schools.com/js/js_loop_for.asp" }] },
                    { module: "Module 2: Programming Language (Base)", topics: ["Syntax and Environment", "Functions and Scope", "Native Data Structures", "String and Number Manipulation", "Error Handling"] },
                    { module: "Module 3: Data Structures", topics: ["Arrays and Matrices", "Stacks and Queues", "Linked Lists", "Trees", "Graphs", "Hash Tables"] },
                    { module: "Module 4: Advanced Algorithms", topics: ["Complexity Analysis (Big O)", "Searching and Sorting", "Recursion", "Dynamic Programming"] },
                    { module: "Module 5: Programming Paradigms", topics: ["Object-Oriented Programming", "Functional Programming", "Design Patterns"] },
                    { module: "Module 6: Databases", topics: ["Relational Databases (SQL)", "NoSQL Databases", "Data Modeling", "ORM (Object-Relational Mapping)"] },
                    { module: "Module 7: Tools and Best Practices", topics: ["Version Control (Git and GitHub)", "Command Line", "Software Testing", "Design Principles (SOLID, DRY)", "REST APIs"] },
                    { module: "Module 8: Advanced Topics", topics: ["Concurrency and Parallelism", "Software Architecture", "Security", "Cloud Computing", "Containers (Docker)"] },
                ]
            },
            js: {
                pt: [
                    { module: "M√≥dulo 1: JavaScript - A Base", topics: ["Sintaxe e Ambiente (Node.js, Navegador)", { name: "Fun√ß√µes e Escopo", link: "https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Guide/Functions" }, { name: "Arrays e Objetos", link: "https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array" }, "Manipula√ß√£o do DOM", { name: "Tratamento de Erros", link: "https://www.w3schools.com/js/js_errors.asp" }] },
                    { module: "M√≥dulo 2: JavaScript Avan√ßado", topics: [{ name: "Programa√ß√£o Ass√≠ncrona (Promises, async/await)", link: "https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Guide/Using_promises" }, { name: "M√≥dulos (import/export)", link: "https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Guide/Modules" }, "POO (Prototypes, Classes)", "Programa√ß√£o Funcional (map, filter, reduce)", "Event Loop"] },
                    { module: "M√≥dulo 3: Ecossistema JS", topics: [{ name: "Gerenciador de Pacotes (NPM/Yarn)", link: "https://docs.npmjs.com/about-npm" }, { name: "Frameworks (React, Vue ou Angular)", link: "https://react.dev/" }, "Bundlers (Webpack, Vite)", { name: "Testes (Jest, Testing Library)", link: "https://jestjs.io/" }, "TypeScript", { name: "Node.js e Express.js", link: "https://expressjs.com/pt-br/" }] },
                ],
                en: [
                    { module: "Module 1: JavaScript - The Base", topics: ["Syntax and Environment (Node.js, Browser)", { name: "Functions and Scope", link: "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions" }, { name: "Arrays and Objects", link: "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" }, "DOM Manipulation", { name: "Error Handling", link: "https://www.w3schools.com/js/js_errors.asp" }] },
                    { module: "Module 2: Advanced JavaScript", topics: [{ name: "Asynchronous Programming (Promises, async/await)", link: "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" }, { name: "Modules (import/export)", link: "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" }, "OOP (Prototypes, Classes)", "Functional Programming (map, filter, reduce)", "Event Loop"] },
                    { module: "Module 3: JS Ecosystem", topics: [{ name: "Package Managers (NPM/Yarn)", link: "https://docs.npmjs.com/about-npm" }, { name: "Frameworks (React, Vue, or Angular)", link: "https://react.dev/" }, "Bundlers (Webpack, Vite)", { name: "Testing (Jest, Testing Library)", link: "https://jestjs.io/" }, "TypeScript", { name: "Node.js and Express.js", link: "https://expressjs.com/" }] },
                ]
            },
            python: {
                pt: [
                    { module: "M√≥dulo 1: Python - A Base", topics: ["Sintaxe e Ambiente (Python 3, venv)", { name: "Fun√ß√µes e Escopo", link: "https://docs.python.org/pt-br/3/tutorial/controlflow.html#defining-functions" }, { name: "Estruturas de Dados (list, tuple, dict, set)", link: "https://docs.python.org/pt-br/3/tutorial/datastructures.html" }, "Manipula√ß√£o de Arquivos", { name: "Tratamento de Erros", link: "https://docs.python.org/pt-br/3/tutorial/errors.html" }] },
                    { module: "M√≥dulo 2: Python Avan√ßado", topics: [{ name: "Programa√ß√£o Orientada a Objetos", link: "https://docs.python.org/pt-br/3/tutorial/classes.html" }, { name: "Programa√ß√£o Funcional (List Comprehensions, Lambda)", link: "https://docs.python.org/pt-br/3/howto/functional.html" }, "M√≥dulos e Pacotes", "Decorators", "Generators"] },
                    { module: "M√≥dulo 3: Ecossistema Python", topics: [{ name: "Gerenciador de Pacotes (Pip)", link: "https://pip.pypa.io/en/stable/" }, { name: "Frameworks Web (Django ou Flask)", link: "https://www.djangoproject.com/" }, "An√°lise de Dados (Pandas, NumPy)", { name: "Testes (Pytest, Unittest)", link: "https://docs.pytest.org/en/stable/" }, "APIs com FastAPI", "Automa√ß√£o de Tarefas"] },
                ],
                en: [
                    { module: "Module 1: Python - The Base", topics: ["Syntax and Environment (Python 3, venv)", { name: "Functions and Scope", link: "https://docs.python.org/3/tutorial/controlflow.html#defining-functions" }, { name: "Data Structures (list, tuple, dict, set)", link: "https://docs.python.org/3/tutorial/datastructures.html" }, "File Handling", { name: "Error Handling", link: "https://docs.python.org/3/tutorial/errors.html" }] },
                    { module: "Module 2: Advanced Python", topics: [{ name: "Object-Oriented Programming", link: "https://docs.python.org/3/tutorial/classes.html" }, { name: "Functional Programming (List Comprehensions, Lambda)", link: "https://docs.python.org/3/howto/functional.html" }, "Modules and Packages", "Decorators", "Generators"] },
                    { module: "Module 3: Python Ecosystem", topics: [{ name: "Package Manager (Pip)", link: "https://pip.pypa.io/en/stable/" }, { name: "Web Frameworks (Django or Flask)", link: "https://www.djangoproject.com/" }, "Data Analysis (Pandas, NumPy)", { name: "Testing (Pytest, Unittest)", link: "https://docs.pytest.org/en/stable/" }, "APIs with FastAPI", "Task Automation"] },
                ]
            },
             csharp: {
                pt: [
                    { module: "M√≥dulo 1: C# - A Base", topics: ["Sintaxe e Ambiente (.NET SDK)", { name: "M√©todos e Escopo", link: "https://learn.microsoft.com/pt-br/dotnet/csharp/programming-guide/classes-and-structs/methods" }, { name: "Arrays, Listas e Dicion√°rios", link: "https://learn.microsoft.com/pt-br/dotnet/csharp/programming-guide/arrays/" }, "Manipula√ß√£o de Strings", "Tratamento de Exce√ß√µes"] },
                    { module: "M√≥dulo 2: C# Avan√ßado", topics: [{ name: "Programa√ß√£o Orientada a Objetos", link: "https://learn.microsoft.com/pt-br/dotnet/csharp/fundamentals/tutorials/oop" }, { name: "LINQ", link: "https://learn.microsoft.com/pt-br/dotnet/csharp/linq/" }, "Generics", "Programa√ß√£o Ass√≠ncrona (async/await)", "Delegates e Eventos"] },
                    { module: "M√≥dulo 3: Ecossistema C#", topics: [{ name: "Gerenciador de Pacotes (NuGet)", link: "https://learn.microsoft.com/pt-br/nuget/what-is-nuget" }, { name: "ASP.NET Core para Web/APIs", link: "https://learn.microsoft.com/pt-br/aspnet/core/" }, "Entity Framework Core (ORM)", { name: "Testes (xUnit, NUnit)", link: "https://xunit.net/" }, "Desktop (WPF, MAUI)", "Jogos (Unity)"] },
                ],
                en: [
                    { module: "Module 1: C# - The Base", topics: ["Syntax and Environment (.NET SDK)", { name: "Methods and Scope", link: "https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/methods" }, { name: "Arrays, Lists, and Dictionaries", link: "https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/arrays/" }, "String Manipulation", "Exception Handling"] },
                    { module: "Module 2: Advanced C#", topics: [{ name: "Object-Oriented Programming", link: "https://learn.microsoft.com/en-us/dotnet/csharp/fundamentals/tutorials/oop" }, { name: "LINQ", link: "https://learn.microsoft.com/en-us/dotnet/csharp/linq/" }, "Generics", "Asynchronous Programming (async/await)", "Delegates and Events"] },
                    { module: "Module 3: C# Ecosystem", topics: [{ name: "Package Manager (NuGet)", link: "https://learn.microsoft.com/en-us/nuget/what-is-nuget" }, { name: "ASP.NET Core for Web/APIs", link: "https://learn.microsoft.com/en-us/aspnet/core/" }, "Entity Framework Core (ORM)", { name: "Testing (xUnit, NUnit)", link: "https://xunit.net/" }, "Desktop (WPF, MAUI)", "Game Development (Unity)"] },
                ]
            },
            java: {
                pt: [
                    { module: "M√≥dulo 1: Java - A Base", topics: ["Sintaxe e Ambiente (JDK, Maven/Gradle)", { name: "M√©todos e Escopo", link: "https://www.w3schools.com/java/java_methods.asp" }, { name: "Arrays e Collections (List, Map)", link: "https://www.geeksforgeeks.org/collections-in-java-2/" }, "Manipula√ß√£o de Strings", "Tratamento de Exce√ß√µes"] },
                    { module: "M√≥dulo 2: Java Avan√ßado", topics: [{ name: "Programa√ß√£o Orientada a Objetos", link: "https://www.w3schools.com/java/java_oop.asp" }, { name: "Streams API e Lambda", link: "https://www.baeldung.com/java-8-streams" }, "Generics", "Programa√ß√£o Concorrente (Threads)", "JDBC"] },
                    { module: "M√≥dulo 3: Ecossistema Java", topics: [{ name: "Gerenciador de Depend√™ncias (Maven/Gradle)", link: "https://maven.apache.org/" }, { name: "Framework Spring e Spring Boot", link: "https://spring.io/projects/spring-boot" }, "Hibernate (ORM)", { name: "Testes (JUnit, Mockito)", link: "https://junit.org/junit5/" }, "Desenvolvimento Android", "Microsservi√ßos"] },
                ],
                en: [
                    { module: "Module 1: Java - The Base", topics: ["Syntax and Environment (JDK, Maven/Gradle)", { name: "Methods and Scope", link: "https://www.w3schools.com/java/java_methods.asp" }, { name: "Arrays and Collections (List, Map)", link: "https://www.geeksforgeeks.org/collections-in-java-2/" }, "String Manipulation", "Exception Handling"] },
                    { module: "Module 2: Advanced Java", topics: [{ name: "Object-Oriented Programming", link: "https://www.w3schools.com/java/java_oop.asp" }, { name: "Streams API and Lambda", link: "https://www.baeldung.com/java-8-streams" }, "Generics", "Concurrent Programming (Threads)", "JDBC"] },
                    { module: "Module 3: Java Ecosystem", topics: [{ name: "Dependency Management (Maven/Gradle)", link: "https://maven.apache.org/" }, { name: "Spring Framework and Spring Boot", link: "https://spring.io/projects/spring-boot" }, "Hibernate (ORM)", { name: "Testing (JUnit, Mockito)", link: "https://junit.org/junit5/" }, "Android Development", "Microservices"] },
                ]
            },
            rust: {
                pt: [
                    { module: "M√≥dulo 1: Rust - A Base", topics: ["Sintaxe e Ambiente (Rustup, Cargo)", { name: "Ownership e Borrowing", link: "https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html" }, { name: "Structs e Enums", link: "https://doc.rust-lang.org/book/ch05-00-structs.html" }, "Cole√ß√µes Comuns", { name: "Tratamento de Erros (Result, Option)", link: "https://doc.rust-lang.org/book/ch09-00-error-handling.html" }] },
                    { module: "M√≥dulo 2: Rust Avan√ßado", topics: [{ name: "Traits", link: "https://doc.rust-lang.org/book/ch10-02-traits.html" }, { name: "Lifetimes", link: "https://doc.rust-lang.org/book/ch10-03-lifetime-syntax.html" }, "Closures e Iterators", "Testes em Rust", "M√≥dulos e Crates"] },
                    { module: "M√≥dulo 3: Ecossistema Rust", topics: [{ name: "Gerenciador de Pacotes (Cargo)", link: "https://doc.rust-lang.org/cargo/" }, { name: "Desenvolvimento Web (Actix, Rocket)", link: "https://actix.rs/" }, "Programa√ß√£o de Sistemas", "CLI com Clap", "WebAssembly (WASM)"] },
                ],
                en: [
                    { module: "Module 1: Rust - The Base", topics: ["Syntax and Environment (Rustup, Cargo)", { name: "Ownership and Borrowing", link: "https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html" }, { name: "Structs and Enums", link: "https://doc.rust-lang.org/book/ch05-00-structs.html" }, "Common Collections", { name: "Error Handling (Result, Option)", link: "https://doc.rust-lang.org/book/ch09-00-error-handling.html" }] },
                    { module: "Module 2: Advanced Rust", topics: [{ name: "Traits", link: "https://doc.rust-lang.org/book/ch10-02-traits.html" }, { name: "Lifetimes", link: "https://doc.rust-lang.org/book/ch10-03-lifetime-syntax.html" }, "Closures and Iterators", "Testing in Rust", "Modules and Crates"] },
                    { module: "Module 3: Rust Ecosystem", topics: [{ name: "Package Manager (Cargo)", link: "https://doc.rust-lang.org/cargo/" }, { name: "Web Development (Actix, Rocket)", link: "https://actix.rs/" }, "Systems Programming", "CLI with Clap", "WebAssembly (WASM)"] },
                ]
            }
        };

        const translations = {
            pt: {
                mainTitle: "Plano de Estudos de Programa√ß√£o",
                mainSubtitle: "Sua jornada do b√°sico ao avan√ßado com acompanhamento de progresso e anota√ß√µes.",
                progressTitle: "Meu Progresso Geral",
                tabGeneral: "Plano Geral",
                aiAssistantTitle: "Assistente IA",
                chatPlaceholder: "Pergunte algo sobre programa√ß√£o...",
                sendButton: "Enviar",
                modalTitle: "Configurar Chave de API",
                modalDesc: "Para usar o Assistente IA, voc√™ precisa de uma chave de API do Google AI Studio. √â gr√°tis para come√ßar.",
                modalSteps: [`Acesse o <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-indigo-600 underline">Google AI Studio</a>.`, `Clique em "Create API key".`, `Copie a chave gerada e cole no campo abaixo.`],
                modalApiKeyPlaceholder: "Cole sua chave de API aqui",
                modalCancel: "Cancelar",
                modalSave: "Salvar",
                notesButton: "Adicionar/Ver Anota√ß√µes",
                notesPlaceholder: "Suas anota√ß√µes sobre este m√≥dulo...",
                resourceButton: "Acessar Recurso",
                footerText: "Este site foi criado para ajudar programadores novatos a alcan√ßar seus objetivos. N√£o somos remunerados por isso, nosso √∫nico desejo √© oferecer uma √≥tima experi√™ncia aos usu√°rios.",
                systemMsgApiKeySaved: "Chave de API salva com sucesso!",
                systemMsgApiKeyNeeded: "Por favor, configure sua chave de API do Google AI nas configura√ß√µes (‚öôÔ∏è) para usar o assistente.",
                systemMsgWelcome: "Bem-vindo! Para come√ßar, configure sua chave de API do Google AI nas configura√ß√µes (‚öôÔ∏è) no canto superior direito.",
                systemMsgReady: "Assistente pronto! Fa√ßa sua pergunta.",
                systemMsgError: "Ocorreu um erro. Verifique se sua chave de API est√° correta e se h√° conex√£o com a internet.",
                systemMsgNoResponse: "Desculpe, n√£o consegui gerar uma resposta."
            },
            en: {
                mainTitle: "Programming Study Plan",
                mainSubtitle: "Your journey from basic to advanced with progress tracking and notes.",
                progressTitle: "My Overall Progress",
                tabGeneral: "General Plan",
                aiAssistantTitle: "AI Assistant",
                chatPlaceholder: "Ask something about programming...",
                sendButton: "Send",
                modalTitle: "Set API Key",
                modalDesc: "To use the AI Assistant, you need an API key from Google AI Studio. It's free to get started.",
                modalSteps: [`Go to <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-indigo-600 underline">Google AI Studio</a>.`, `Click "Create API key".`, `Copy the generated key and paste it in the field below.`],
                modalApiKeyPlaceholder: "Paste your API key here",
                modalCancel: "Cancel",
                modalSave: "Save",
                notesButton: "Add/View Notes",
                notesPlaceholder: "Your notes on this module...",
                resourceButton: "Access Resource",
                footerText: "This site was created to help novice programmers achieve their goals. We are not compensated for this; our only wish is to provide a great experience for users.",
                systemMsgApiKeySaved: "API Key saved successfully!",
                systemMsgApiKeyNeeded: "Please set your Google AI API key in the settings (‚öôÔ∏è) to use the assistant.",
                systemMsgWelcome: "Welcome! To get started, set your Google AI API key in the settings (‚öôÔ∏è) in the top right corner.",
                systemMsgReady: "Assistant ready! Ask your question.",
                systemMsgError: "An error occurred. Check if your API key is correct and if you have an internet connection.",
                systemMsgNoResponse: "Sorry, I couldn't generate a response."
            }
        };

        class StudyApp {
            constructor() {
                this.studyProgress = {};
                this.apiKey = '';
                this.currentLang = 'pt';
                this.currentTab = 'general';
                this.elements = {
                    mainTitle: document.getElementById('main-title'),
                    mainSubtitle: document.getElementById('main-subtitle'),
                    langSwitcher: document.getElementById('lang-switcher'),
                    progressTitle: document.getElementById('progress-title'),
                    progressBar: document.getElementById('progressBar'),
                    tabSelector: document.getElementById('tab-selector'),
                    modulesContainer: document.getElementById('modulesContainer'),
                    footerText: document.getElementById('footer-text'),
                    aiPanel: document.getElementById('ai-assistant'),
                    toggleAiBtn: document.getElementById('toggle-ai'),
                    closeAiBtn: document.getElementById('close-ai'),
                    aiAssistantTitle: document.getElementById('ai-assistant-title'),
                    chatMessages: document.getElementById('chat-messages'),
                    chatInput: document.getElementById('chat-input'),
                    sendBtn: document.getElementById('send-btn'),
                    settingsBtn: document.getElementById('settings-btn'),
                    apiKeyModal: document.getElementById('api-key-modal'),
                    modalTitle: document.getElementById('modal-title'),
                    modalDesc: document.getElementById('modal-desc'),
                    modalSteps: document.getElementById('modal-steps'),
                    apiKeyInput: document.getElementById('api-key-input'),
                    modalApiKeyPlaceholder: document.getElementById('api-key-input'),
                    saveApiKeyBtn: document.getElementById('save-api-key'),
                    cancelApiKeyBtn: document.getElementById('cancel-api-key'),
                };
                this.init();
            }

            init() {
                this.loadData();
                this.renderTabs();
                this.applyTranslations();
                this.renderModules();
                this.addEventListeners();
                this.initAIChat();
                this.updateActiveTab();
            }

            loadData() {
                this.currentLang = localStorage.getItem('currentLanguage') || 'pt';
                this.currentTab = localStorage.getItem('currentTab') || 'general';
                this.apiKey = localStorage.getItem('googleApiKey') || '';
                const savedProgress = JSON.parse(localStorage.getItem('studyProgress')) || {};

                // Initialize progress for the general plan if not present
                const generalStructure = contentData.general.pt;
                if (!savedProgress.general || savedProgress.general.length !== generalStructure.length) {
                    savedProgress.general = generalStructure.map(mod => ({
                        notes: "",
                        topics: mod.topics.map(() => ({ completed: false }))
                    }));
                }
                this.studyProgress = savedProgress;
            }

            saveData() {
                localStorage.setItem('studyProgress', JSON.stringify(this.studyProgress));
                localStorage.setItem('googleApiKey', this.apiKey);
                localStorage.setItem('currentLanguage', this.currentLang);
                localStorage.setItem('currentTab', this.currentTab);
            }

            applyTranslations() {
                const t = translations[this.currentLang];
                document.documentElement.lang = this.currentLang;
                Object.keys(this.elements).forEach(key => {
                    if (t[key] && this.elements[key]) this.elements[key].textContent = t[key];
                });
                this.elements.chatInput.placeholder = t.chatPlaceholder;
                this.elements.modalApiKeyPlaceholder.placeholder = t.modalApiKeyPlaceholder;
                this.elements.modalSteps.innerHTML = t.modalSteps.map(item => `<li>${item}</li>`).join('');
                this.renderTabs(); // Re-render tabs for translation
            }

            updateProgress() {
                const generalProgress = this.studyProgress.general;
                if (!generalProgress) return;
                const allTopics = generalProgress.flatMap(module => module.topics);
                const completedTopics = allTopics.filter(topic => topic.completed).length;
                const totalTopics = allTopics.length;
                const percentage = totalTopics > 0 ? Math.round((completedTopics / totalTopics) * 100) : 0;
                
                this.elements.progressBar.style.width = `${percentage}%`;
                this.elements.progressBar.textContent = `${percentage}%`;
            }
            
            renderTabs() {
                const t = translations[this.currentLang];
                const tabs = [
                    { id: 'general', name: t.tabGeneral },
                    { id: 'js', name: 'JavaScript' },
                    { id: 'python', name: 'Python' },
                    { id: 'csharp', name: 'C#' },
                    { id: 'java', name: 'Java' },
                    { id: 'rust', name: 'Rust' },
                ];
                this.elements.tabSelector.innerHTML = tabs.map(tab => `
                    <button data-tab="${tab.id}" class="tab-button flex-grow text-center py-2 px-4 rounded-md font-semibold text-slate-700 -mb-px border border-transparent">
                        ${tab.name}
                    </button>
                `).join('');
                this.updateActiveTab();
            }

            renderModules() {
                const t = translations[this.currentLang];
                const plan = contentData[this.currentTab][this.currentLang];
                const isGeneralPlan = this.currentTab === 'general';
                
                this.elements.modulesContainer.innerHTML = '';
                plan.forEach((moduleData, moduleIndex) => {
                    const moduleEl = document.createElement('div');
                    moduleEl.className = 'bg-white p-6 rounded-xl shadow-sm border border-slate-200';

                    const topicsHtml = moduleData.topics.map((topic, topicIndex) => {
                        const topicName = typeof topic === 'string' ? topic : topic.name;
                        const topicLink = topic.link || null;
                        
                        let topicContentHtml = `<span class="ml-3 text-slate-700 flex-grow">${topicName}</span>`;
                        if (topicLink) {
                            topicContentHtml += `<a href="${topicLink}" target="_blank" rel="noopener noreferrer" class="ml-4 text-sm text-indigo-600 hover:text-indigo-800 font-medium shrink-0">${t.resourceButton}</a>`;
                        }
                        
                        if (isGeneralPlan) {
                            const progress = this.studyProgress.general[moduleIndex].topics[topicIndex];
                            return `
                                <div class="flex items-center py-2 border-b border-slate-100 last:border-b-0">
                                    <label for="topic-${moduleIndex}-${topicIndex}" class="flex items-center cursor-pointer w-full">
                                        <input id="topic-${moduleIndex}-${topicIndex}" type="checkbox" class="h-5 w-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 custom-checkbox" ${progress.completed ? 'checked' : ''} data-module="${moduleIndex}" data-topic="${topicIndex}">
                                        ${topicContentHtml}
                                    </label>
                                </div>`;
                        } else {
                            return `<div class="flex items-center py-2 border-b border-slate-100 last:border-b-0">${topicContentHtml}</div>`;
                        }
                    }).join('');
                    
                    let notesHtml = '';
                    if (isGeneralPlan) {
                         notesHtml = `
                            <div class="mt-4 pt-4 border-t border-slate-200">
                                <button class="text-sm text-indigo-600 hover:text-indigo-800 font-medium" data-notes-toggle="${moduleIndex}">${t.notesButton}</button>
                                <div id="notes-container-${moduleIndex}" class="notes-container">
                                    <textarea class="w-full h-24 p-2 border border-slate-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="${t.notesPlaceholder}" data-notes-input="${moduleIndex}">${this.studyProgress.general[moduleIndex].notes || ''}</textarea>
                                </div>
                            </div>`;
                    }

                    moduleEl.innerHTML = `
                        <h3 class="text-2xl font-semibold mb-4 text-slate-800">${moduleData.module}</h3>
                        <div class="space-y-2">${topicsHtml}</div>
                        ${notesHtml}`;
                    this.elements.modulesContainer.appendChild(moduleEl);
                });
                if(isGeneralPlan) this.updateProgress();
            }
            
            updateActiveTab() {
                this.elements.tabSelector.querySelectorAll('.tab-button').forEach(tab => {
                    tab.classList.remove('active', 'border-slate-300', 'bg-white');
                    if (tab.dataset.tab === this.currentTab) {
                        tab.classList.add('active');
                    }
                });
            }

            addEventListeners() {
                this.elements.modulesContainer.addEventListener('change', (e) => {
                    if (e.target.matches('input[type="checkbox"]') && this.currentTab === 'general') {
                        const { module, topic } = e.target.dataset;
                        this.studyProgress.general[module].topics[topic].completed = e.target.checked;
                        this.saveData();
                        this.updateProgress();
                    }
                });

                this.elements.modulesContainer.addEventListener('input', (e) => {
                    if (e.target.matches('textarea[data-notes-input]') && this.currentTab === 'general') {
                        const { notesInput } = e.target.dataset;
                        this.studyProgress.general[notesInput].notes = e.target.value;
                        this.saveData();
                    }
                });

                this.elements.modulesContainer.addEventListener('click', (e) => {
                    if (e.target.matches('button[data-notes-toggle]')) {
                        const { notesToggle } = e.target.dataset;
                        document.getElementById(`notes-container-${notesToggle}`).classList.toggle('open');
                    }
                });
                
                this.elements.langSwitcher.addEventListener('click', () => {
                    this.currentLang = this.currentLang === 'pt' ? 'en' : 'pt';
                    this.saveData();
                    this.applyTranslations();
                    this.renderModules();
                });
                
                this.elements.tabSelector.addEventListener('click', (e) => {
                    if(e.target.matches('.tab-button')) {
                        this.currentTab = e.target.dataset.tab;
                        this.saveData();
                        this.renderModules();
                        this.updateActiveTab();
                    }
                });

                this.elements.toggleAiBtn.addEventListener('click', () => this.elements.aiPanel.classList.remove('translate-x-full'));
                this.elements.closeAiBtn.addEventListener('click', () => this.elements.aiPanel.classList.add('translate-x-full'));
                this.elements.settingsBtn.addEventListener('click', () => {
                    this.elements.apiKeyInput.value = this.apiKey;
                    this.elements.apiKeyModal.style.display = 'flex';
                });
                this.elements.cancelApiKeyBtn.addEventListener('click', () => this.elements.apiKeyModal.style.display = 'none');
                this.elements.saveApiKeyBtn.addEventListener('click', () => {
                    const newApiKey = this.elements.apiKeyInput.value.trim();
                    if (newApiKey) {
                        this.apiKey = newApiKey;
                        this.saveData();
                        this.elements.apiKeyModal.style.display = 'none';
                        this.addMessage('system', translations[this.currentLang].systemMsgApiKeySaved);
                    }
                });
                this.elements.sendBtn.addEventListener('click', () => this.handleSendMessage());
                this.elements.chatInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') this.handleSendMessage();
                });
            }

            addMessage(sender, text, isHtml = false) {
                const messageEl = document.createElement('div');
                let messageClasses = 'p-3 rounded-lg max-w-xs break-words';
                if (sender === 'user') {
                    messageClasses += ' bg-indigo-500 text-white self-end';
                } else if (sender === 'ai') {
                    messageClasses += ' bg-slate-200 text-slate-800 self-start message-content';
                } else { // System message
                    messageClasses += ' bg-yellow-100 text-yellow-800 self-center text-sm w-full text-center';
                }
                messageEl.className = messageClasses;
                
                if (isHtml) {
                    messageEl.innerHTML = text;
                } else {
                    messageEl.textContent = text;
                }

                this.elements.chatMessages.appendChild(messageEl);
                this.elements.chatMessages.scrollTop = this.elements.chatMessages.scrollHeight;
                return messageEl;
            }

            async handleSendMessage() {
                const userPrompt = this.elements.chatInput.value.trim();
                const t = translations[this.currentLang];
                if (!userPrompt) return;

                if (!this.apiKey) {
                    this.addMessage('system', t.systemMsgApiKeyNeeded);
                    this.elements.apiKeyModal.style.display = 'flex';
                    return;
                }

                this.addMessage('user', userPrompt);
                this.elements.chatInput.value = '';
                
                const thinkingMessage = this.addMessage('ai', '<div class="spinner"></div>', true);

                try {
                    const payload = {
                        contents: [{
                            role: "user",
                            parts: [{ text: `You are a friendly and helpful programming tutor. Answer the following question clearly using Markdown and with code examples, if applicable: ${userPrompt}` }]
                        }]
                    };
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${this.apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`API error: ${response.status} ${response.statusText}`);

                    const result = await response.json();
                    
                    if (result.candidates?.[0]?.content.parts?.[0]?.text) {
                        const aiText = result.candidates[0].content.parts[0].text;
                        thinkingMessage.innerHTML = marked.parse(aiText);
                    } else {
                        thinkingMessage.textContent = t.systemMsgNoResponse;
                    }
                } catch (error) {
                    console.error("Error calling AI API:", error);
                    thinkingMessage.textContent = t.systemMsgError;
                }
            }
            
            initAIChat() {
                const t = translations[this.currentLang];
                this.elements.chatMessages.innerHTML = ''; // Clear previous messages
                if (!this.apiKey) {
                    this.addMessage('system', t.systemMsgWelcome);
                } else {
                    this.addMessage('system', t.systemMsgReady);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => new StudyApp());
    </script>
</body>
</html>
